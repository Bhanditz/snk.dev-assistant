# Use Alpine v3.7.
FROM alpine:3.7

# Image maintainer.
LABEL maintainer="diego@hernandev.com"

# trust this project public key to trust the packages.
ADD https://php.codecasts.rocks/php-alpine.rsa.pub /etc/apk/keys/php-alpine.rsa.pub

# make sure you can use HTTPS
RUN apk --update add ca-certificates wget curl

# add the repository, make sure you replace the correct versions if you want.
RUN echo "@php https://php.codecasts.rocks/v3.7/php-7.2" >> /etc/apk/repositories

# install php and some extensions
# notice the @php is required to avoid getting default php packages from alpine instead.
RUN apk add --update \
    php@php \
    php-bcmath@php \
    php-bz2@php \
    php-calendar@php \
    php-ctype@php \
    php-curl@php \
    # php7-dba@php \
    php-dom@php \
    php-embed@php \
    # php7-enchant@php \
    # php7-exif@php \
    # php7-ftp@php \
    php-gd@php \
    php-gettext@php \
    php-gmp@php \
    php-iconv@php \
    php-imagick@php \
    php-imap@php \
    php-intl@php \
    php-json@php \
    # php7-ldap@php \
    # php7-lightspeed@php \
    php-mbstring@php \
    # php7-mcrypt@php \
    # php7-msqli@php \
    php-mysqlnd@php \
    # php7-odbc@php \
    php-opcache@php \
    php-openssl@php \
    # php7-pcntl@php \
    php-pdo@php \
    # php7-pdo_dblib@php \
    php-pdo_mysql@php \
    php-pdo_sqlite@php \
    # php7-pear@php \
    php-pgsql@php \
    php-phar@php \
    # php7-phpdbg@php \
    php-posix@php \
    # php7-pgspell@php \
    php-session@php \
    # php7-shmop@php \
    # php7-snmp@php \
    php-soap@php \
    php-sockets@php \
    php-sqlite3@php \
    # php7-sysvmsg@php \
    # php7-sysvsem@php \
    # php7-sysvshm@php \
    # php7-tidy@php \
    # php7-wddx@php \
    php-xml@php \
    php-xmlreader@php \
    # php7-xmlrpc@php \
    # php7-xsl@php \
    php-zip@php \
    php-zlib@php